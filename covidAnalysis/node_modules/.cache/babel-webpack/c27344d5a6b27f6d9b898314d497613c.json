{"ast":null,"code":"/**\n * A collection of DOM-related functions.\n */\nimport * as tslib_1 from \"tslib\";\n/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\n\nimport { Disposer } from \"./Disposer\";\nimport { readFrame, writeFrame } from \"./AsyncPending\";\nimport * as $object from \"./Object\";\nimport * as $array from \"./Array\";\nimport * as $type from \"./Type\";\n/**\n * SVG namespace.\n *\n * @ignore Exclude from docs\n */\n\nexport var SVGNS = \"http://www.w3.org/2000/svg\";\n/**\n * XML namespace.\n *\n * @ignore Exclude from docs\n */\n\nexport var XMLNS = \"http://www.w3.org/2000/xmlns/\";\n/**\n * XLINK namespace.\n *\n * @ignore Exclude from docs\n */\n\nexport var XLINK = \"http://www.w3.org/1999/xlink\";\n/**\n * Function that adds a disposable event listener directly to a DOM element.\n *\n * @ignore Exclude from docs\n * @param dom       A DOM element to add event to\n * @param type      Event type\n * @param listener  Event listener\n * @returns Disposable event\n */\n\nexport function addEventListener(dom, type, listener, options) {\n  //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\n  //console.log(type, dom);\n  dom.addEventListener(type, listener, options || false);\n  return new Disposer(function () {\n    dom.removeEventListener(type, listener, options || false);\n  });\n}\n/**\n * Finds and returns an element reference using following logic:\n * * If we pass in an element instance, we just return it back.\n * * If we pass in a string, the function looks for an element with such id.\n * * If no element with such id is found, we grab the first element with a tag name like this.\n *\n * @ignore Exclude from docs\n * @param el  Element definition (reference, or id, or tag name)\n * @return Element reference\n * @todo Review this function as it seems pretty fuzzy and hacky\n */\n\nexport function getElement(el) {\n  if ($type.isString(el)) {\n    var e = document.getElementById(el);\n\n    if (e == null) {\n      e = document.getElementsByClassName(el)[0];\n    }\n\n    if (e instanceof HTMLElement) {\n      return e;\n    }\n  } else if (el instanceof HTMLElement) {\n    return el;\n  }\n}\n/**\n * Adds a class name to an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param element    Element\n * @param className  Class name to add\n */\n\nexport function addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \") + \" \" + className);\n    } else {\n      element.setAttribute(\"class\", className);\n    } //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\") + \" \" + className;\n\n  }\n}\n/**\n * Removes a class name from an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param element    Element\n * @param className  Class name to add\n */\n\nexport function removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \"));\n    } //element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\");\n\n  }\n}\n/**\n * Sets style property on DOM element.\n *\n * @ignore Exclude from docs\n * @todo Still needed?\n */\n\nexport function setStyle(element, property, value) {\n  element.style[property] = value;\n}\n/**\n * Removes focus from any element by shifting focus to body.\n *\n * @ignore Exclude from docs\n */\n\nexport function blur() {\n  var input = document.createElement(\"input\");\n  input.style.position = \"fixed\";\n  input.style.top = \"0px\";\n  input.style.left = \"-10000px\";\n  document.body.appendChild(input);\n  input.focus();\n  input.blur();\n  document.body.removeChild(input);\n}\n/**\n * Tries to focus the element.\n *\n * @ignore Exlude from docs\n * @param element  Element to focus\n */\n\nexport function focus(element) {\n  if (element instanceof HTMLElement) {\n    element.focus();\n  } else {\n    var input = document.createElement(\"input\");\n    var fo = document.createElementNS(SVGNS, \"foreignObject\");\n    fo.appendChild(input);\n    element.appendChild(fo);\n    input.focus();\n    input.disabled = true;\n    fo.remove();\n  }\n  /*if ((<any>element).focus != undefined) {\n      (<any>element).focus();\n  }\n  else if (element instanceof SVGSVGElement) {\n      // Not implemented\n      // @todo implement focus fallback\n  }*/\n\n}\n/**\n * Returns markup for the element including the element tag itself.\n * SVG elements do not support `outerHTML` so this functions applies of\n * a workaround which creates a new temporary wrapper, clones element and uses\n * wrapper's `innerHTML`.\n *\n * @ignore Exclude from docs\n * @param element  Element to get full markup for\n * @return Markup\n * @deprecated Not in use anywhere\n */\n\nexport function outerHTML(element) {\n  if (element.outerHTML) {\n    return element.outerHTML;\n  } else {\n    var twrap = document.createElement(\"div\");\n    var tnode = element.cloneNode(true);\n    twrap.appendChild(tnode);\n    var content = twrap.innerHTML;\n    return content;\n  }\n}\n/**\n * Checks if element is a valid DOM node.\n *\n * @ignore Exclude from docs\n * @param el  Element\n * @return `true` if element is a valid DOM node\n */\n\nexport function isElement(el) {\n  return el instanceof Object && el && el.nodeType === 1;\n}\n/**\n * Checks of element `a` contains element `b`.\n *\n * @param a  Aleged ascendant\n * @param b  Aleged descendant\n * @return Contains?\n */\n\nexport function contains(a, b) {\n  return a === b || (a.contains ? a.contains(b) : a.compareDocumentPosition ? !!(a.compareDocumentPosition(b) & 16) : true);\n}\n/**\n * Copies attributes from one element to another.\n *\n * @ignore Exclude from docs\n * @param source  Element to copy attributes from\n * @param target  Element to copy attributes to\n */\n\nexport function copyAttributes(source, target) {\n  $array.each(source.attributes, function (attr) {\n    // TODO what if it's null ?\n    if (attr.value != null) {\n      target.setAttribute(attr.name, attr.value);\n    }\n  });\n}\n/**\n * [fixPixelPerfect description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param el  Element\n */\n\nexport function fixPixelPerfect(el) {\n  readFrame(function () {\n    // sometimes IE doesn't like this\n    // TODO figure out a way to remove this\n    try {\n      var rect = el.getBoundingClientRect();\n      var left_1 = rect.left - Math.round(rect.left);\n      var top_1 = rect.top - Math.round(rect.top);\n\n      if (left_1 !== 0) {\n        writeFrame(function () {\n          el.style.left = left_1 + \"px\";\n        });\n      }\n\n      if (top_1 !== 0) {\n        writeFrame(function () {\n          el.style.top = top_1 + \"px\";\n        });\n      }\n    } catch (e) {}\n  });\n}\n/**\n * [rootStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n */\n\nvar rootStylesheet;\n/**\n * [getStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @return [description]\n */\n\nfunction getStylesheet() {\n  if (!$type.hasValue(rootStylesheet)) {\n    // TODO use createElementNS ?\n    var e = document.createElement(\"style\");\n    e.type = \"text/css\";\n    document.head.appendChild(e);\n    rootStylesheet = e.sheet;\n  }\n\n  return rootStylesheet;\n}\n/**\n * [makeStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param selector  [description]\n * @return [description]\n */\n\n\nfunction makeStylesheet(selector) {\n  var root = getStylesheet();\n  var index = root.cssRules.length;\n  root.insertRule(selector + \"{}\", index);\n  return root.cssRules[index];\n}\n/**\n * Defines a class for a CSS rule.\n *\n * Can be used to dynamically add CSS to the document.\n */\n\n\nvar StyleRule =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(StyleRule, _super);\n  /**\n   * Constructor.\n   *\n   * @param selector  CSS selector\n   * @param styles    An object of style attribute - value pairs\n   */\n\n\n  function StyleRule(selector, styles) {\n    var _this = // TODO test this\n    _super.call(this, function () {\n      var root = getStylesheet(); // TODO a bit hacky\n\n      var index = $array.indexOf(root.cssRules, _this._rule);\n\n      if (index === -1) {\n        throw new Error(\"Could not dispose StyleRule\");\n      } else {\n        root.deleteRule(index);\n      }\n    }) || this;\n\n    _this._rule = makeStylesheet(selector);\n    $object.each(styles, function (key, value) {\n      _this.setStyle(key, value);\n    });\n    return _this;\n  }\n\n  Object.defineProperty(StyleRule.prototype, \"selector\", {\n    /**\n     * @return CSS selector\n     */\n    get: function get() {\n      return this._rule.selectorText;\n    },\n\n    /**\n     * A CSS selector text.\n     *\n     * E.g.: `.myClass p`\n     *\n     * @param selector  CSS selector\n     */\n    set: function set(selector) {\n      this._rule.selectorText = selector;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Sets the same style properties with browser-specific prefixes.\n   *\n   * @param name   Attribute name\n   * @param value  Attribute value\n   */\n\n  StyleRule.prototype._setVendorPrefixName = function (name, value) {\n    var style = this._rule.style;\n    style.setProperty(\"-webkit-\" + name, value, \"\");\n    style.setProperty(\"-moz-\" + name, value, \"\");\n    style.setProperty(\"-ms-\" + name, value, \"\");\n    style.setProperty(\"-o-\" + name, value, \"\");\n    style.setProperty(name, value, \"\");\n  };\n  /**\n   * Sets a value for specific style attribute.\n   *\n   * @param name   Attribute\n   * @param value  Value\n   */\n\n\n  StyleRule.prototype.setStyle = function (name, value) {\n    if (name === \"transition\") {\n      this._setVendorPrefixName(name, value);\n    } else {\n      this._rule.style.setProperty(name, value, \"\");\n    }\n  };\n\n  return StyleRule;\n}(Disposer);\n\nexport { StyleRule };\n/**\n * An internal counter for unique style ids.\n *\n * @ignore Exclude from docs\n */\n\nvar styleId = 0;\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\n\nvar StyleClass =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(StyleClass, _super);\n  /**\n   * Constructor.\n   *\n   * @param styles  An object of style attribute - value pairs\n   * @param name    Class name\n   */\n\n\n  function StyleClass(styles, name) {\n    var _this = this;\n\n    var className = !$type.hasValue(name) // TODO generate the classname randomly\n    ? \"__style_\" + ++styleId + \"__\" : name;\n    _this = _super.call(this, \".\" + className, styles) || this;\n    _this._className = className;\n    return _this;\n  }\n\n  Object.defineProperty(StyleClass.prototype, \"className\", {\n    /**\n     * @return Class name\n     */\n    get: function get() {\n      return this._className;\n    },\n\n    /**\n     * Class name.\n     *\n     * @param name  Class name\n     */\n    set: function set(name) {\n      this._className = name;\n      this.selector = \".\" + name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Converts the whole class to\n   * @ignore Exclude from docs\n   */\n\n  StyleClass.prototype.toString = function () {\n    return this._className;\n  };\n\n  return StyleClass;\n}(StyleRule);\n\nexport { StyleClass };\nexport function ready(f) {\n  if (document.readyState !== \"loading\") {\n    f();\n  } else {\n    var listener_1 = function listener_1() {\n      if (document.readyState !== \"loading\") {\n        document.removeEventListener(\"readystatechange\", listener_1);\n        f();\n      }\n    };\n\n    document.addEventListener(\"readystatechange\", listener_1);\n  }\n}\n/**\n * Returns a font fmaily name for the element (directly set or\n * computed/inherited).\n *\n * @ignore Exclude from docs\n * @param element  Element\n * @return Font family\n */\n\nexport function findFont(element) {\n  // Check if element has styles set\n  var font = \"\";\n\n  if (element.currentStyle) {\n    font = element.currentStyle[\"font-family\"];\n  } else if (window.getComputedStyle) {\n    font = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-family\");\n  }\n\n  if (!font) {\n    // Completely transparent. Look for a parent\n    var parent_1 = element.parentElement || element.parentNode;\n\n    if (parent_1) {\n      return findFont(parent_1);\n    } else {\n      return undefined;\n    }\n  } else {\n    return font;\n  }\n}\n/**\n * Returns a font fmaily name for the element (directly set or\n * computed/inherited).\n *\n * @ignore Exclude from docs\n * @param element  Element\n * @return Font family\n */\n\nexport function findFontSize(element) {\n  // Check if element has styles set\n  var font = \"\";\n\n  if (element.currentStyle) {\n    font = element.currentStyle[\"font-size\"];\n  } else if (window.getComputedStyle) {\n    font = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-size\");\n  }\n\n  if (!font) {\n    // Completely transparent. Look for a parent\n    var parent_2 = element.parentElement || element.parentNode;\n\n    if (parent_2) {\n      return findFontSize(parent_2);\n    } else {\n      return undefined;\n    }\n  } else {\n    return font;\n  }\n}","map":{"version":3,"sources":["../../../../../src/.internal/core/utils/DOM.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * A collection of DOM-related functions.\n */\n\n/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { Disposer, IDisposer } from \"./Disposer\";\nimport { readFrame, writeFrame } from \"./AsyncPending\";\nimport * as $object from \"./Object\";\nimport * as $array from \"./Array\";\nimport * as $type from \"./Type\";\n\n/**\n * SVG namespace.\n *\n * @ignore Exclude from docs\n */\nexport const SVGNS: string = \"http://www.w3.org/2000/svg\";\n\n/**\n * XML namespace.\n *\n * @ignore Exclude from docs\n */\nexport const XMLNS: string = \"http://www.w3.org/2000/xmlns/\";\n\n/**\n * XLINK namespace.\n *\n * @ignore Exclude from docs\n */\nexport const XLINK: string = \"http://www.w3.org/1999/xlink\";\n\n\n/**\n * Function that adds a disposable event listener directly to a DOM element.\n *\n * @ignore Exclude from docs\n * @param dom       A DOM element to add event to\n * @param type      Event type\n * @param listener  Event listener\n * @returns Disposable event\n */\nexport function addEventListener<E extends Event>(dom: EventTarget, type: string, listener: (event: E) => void, options?: any): IDisposer {\n\t//@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\n\t//console.log(type, dom);\n\tdom.addEventListener(type, <EventListener>listener, options || false);\n\n\treturn new Disposer(() => {\n\t\tdom.removeEventListener(type, <EventListener>listener, options || false);\n\t});\n}\n\n/**\n * Finds and returns an element reference using following logic:\n * * If we pass in an element instance, we just return it back.\n * * If we pass in a string, the function looks for an element with such id.\n * * If no element with such id is found, we grab the first element with a tag name like this.\n *\n * @ignore Exclude from docs\n * @param el  Element definition (reference, or id, or tag name)\n * @return Element reference\n * @todo Review this function as it seems pretty fuzzy and hacky\n */\nexport function getElement(el: $type.Optional<HTMLElement | string>): $type.Optional<HTMLElement> {\n\tif ($type.isString(el)) {\n\t\tlet e: Element | null = document.getElementById(el);\n\n\t\tif (e == null) {\n\t\t\te = document.getElementsByClassName(el)[0];\n\t\t}\n\n\t\tif (e instanceof HTMLElement) {\n\t\t\treturn e;\n\t\t}\n\n\t} else if (el instanceof HTMLElement) {\n\t\treturn el;\n\t}\n}\n\n/**\n * Adds a class name to an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param element    Element\n * @param className  Class name to add\n */\nexport function addClass(element: HTMLElement | SVGSVGElement, className: string): void {\n\tif (element.classList) {\n\t\telement.classList.add(className);\n\t}\n\telse {\n\t\tlet currentClassName = element.getAttribute(\"class\");\n\t\tif (currentClassName) {\n\t\t\telement.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\n\t\t\t\treturn item !== className;\n\t\t\t}).join(\" \") + \" \" + className);\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(\"class\", className);\n\t\t}\n\t\t//element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\") + \" \" + className;\n\t}\n}\n\n/**\n * Removes a class name from an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param element    Element\n * @param className  Class name to add\n */\nexport function removeClass(element: HTMLElement | SVGSVGElement, className: string): void {\n\tif (element.classList) {\n\t\telement.classList.remove(className);\n\t}\n\telse {\n\t\tlet currentClassName = element.getAttribute(\"class\");\n\t\tif (currentClassName) {\n\t\t\telement.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\n\t\t\t\treturn item !== className;\n\t\t\t}).join(\" \"));\n\t\t}\n\t\t//element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\");\n\t}\n}\n\n/**\n * Sets style property on DOM element.\n *\n * @ignore Exclude from docs\n * @todo Still needed?\n */\nexport function setStyle(element: HTMLElement | SVGSVGElement, property: string, value: string): void {\n\t(<any>element.style)[property] = value;\n}\n\n/**\n * Removes focus from any element by shifting focus to body.\n *\n * @ignore Exclude from docs\n */\nexport function blur(): void {\n\tlet input = document.createElement(\"input\");\n\tinput.style.position = \"fixed\";\n\tinput.style.top = \"0px\";\n\tinput.style.left = \"-10000px\";\n\tdocument.body.appendChild(input);\n\tinput.focus();\n\tinput.blur();\n\tdocument.body.removeChild(input);\n}\n\n/**\n * Tries to focus the element.\n *\n * @ignore Exlude from docs\n * @param element  Element to focus\n */\nexport function focus(element: HTMLElement | SVGSVGElement): void {\n\n\tif (element instanceof HTMLElement) {\n\t\telement.focus();\n\t}\n\telse {\n\t\tlet input = document.createElement(\"input\");\n\t\tlet fo = <SVGSVGElement>document.createElementNS(SVGNS, \"foreignObject\");\n\t\tfo.appendChild(input);\n\t\telement.appendChild(fo);\n\t\tinput.focus();\n\t\tinput.disabled = true;\n\t\tfo.remove();\n\t}\n\n\t/*if ((<any>element).focus != undefined) {\n\t\t(<any>element).focus();\n\t}\n\telse if (element instanceof SVGSVGElement) {\n\t\t// Not implemented\n\t\t// @todo implement focus fallback\n\t}*/\n}\n\n/**\n * Returns markup for the element including the element tag itself.\n * SVG elements do not support `outerHTML` so this functions applies of\n * a workaround which creates a new temporary wrapper, clones element and uses\n * wrapper's `innerHTML`.\n *\n * @ignore Exclude from docs\n * @param element  Element to get full markup for\n * @return Markup\n * @deprecated Not in use anywhere\n */\nexport function outerHTML(element: HTMLElement | SVGSVGElement): string {\n\tif (element.outerHTML) {\n\t\treturn element.outerHTML;\n\t}\n\telse {\n\t\tlet twrap = document.createElement(\"div\");\n\t\tlet tnode = element.cloneNode(true);\n\t\ttwrap.appendChild(tnode);\n\t\tlet content = twrap.innerHTML;\n\t\treturn content;\n\t}\n}\n\n/**\n * Checks if element is a valid DOM node.\n *\n * @ignore Exclude from docs\n * @param el  Element\n * @return `true` if element is a valid DOM node\n */\nexport function isElement(el: HTMLElement): boolean {\n\treturn el instanceof Object && el && el.nodeType === 1;\n}\n\n/**\n * Checks of element `a` contains element `b`.\n *\n * @param a  Aleged ascendant\n * @param b  Aleged descendant\n * @return Contains?\n */\nexport function contains(a: HTMLElement | SVGSVGElement, b: HTMLElement | SVGSVGElement): boolean {\n\treturn a === b || (a.contains\n\t\t? a.contains(b)\n\t\t: a.compareDocumentPosition\n\t\t\t? !!(a.compareDocumentPosition(b) & 16)\n\t\t\t: true);\n}\n\n/**\n * Copies attributes from one element to another.\n *\n * @ignore Exclude from docs\n * @param source  Element to copy attributes from\n * @param target  Element to copy attributes to\n */\nexport function copyAttributes(source: Element | HTMLElement | SVGSVGElement, target: HTMLElement | SVGSVGElement): void {\n\t$array.each(source.attributes, (attr) => {\n\t\t// TODO what if it's null ?\n\t\tif (attr.value != null) {\n\t\t\ttarget.setAttribute(attr.name, attr.value);\n\t\t}\n\t});\n}\n\n/**\n * [fixPixelPerfect description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param el  Element\n */\nexport function fixPixelPerfect(el: HTMLElement): void {\n\treadFrame(() => {\n\t\t// sometimes IE doesn't like this\n\t\t// TODO figure out a way to remove this\n\t\ttry {\n\t\t\tconst rect = el.getBoundingClientRect();\n\n\t\t\tconst left = rect.left - Math.round(rect.left);\n\t\t\tconst top = rect.top - Math.round(rect.top);\n\n\t\t\tif (left !== 0) {\n\t\t\t\twriteFrame(() => {\n\t\t\t\t\tel.style.left = left + \"px\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (top !== 0) {\n\t\t\t\twriteFrame(() => {\n\t\t\t\t\tel.style.top = top + \"px\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t} catch (e) { }\n\t});\n}\n\n/**\n * [rootStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n */\nlet rootStylesheet: $type.Optional<CSSStyleSheet>;\n\n/**\n * [getStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @return [description]\n */\nfunction getStylesheet(): CSSStyleSheet {\n\tif (!$type.hasValue(rootStylesheet)) {\n\t\t// TODO use createElementNS ?\n\t\tconst e = document.createElement(\"style\");\n\t\te.type = \"text/css\";\n\t\tdocument.head.appendChild(e);\n\t\trootStylesheet = e.sheet as CSSStyleSheet;\n\t}\n\n\treturn rootStylesheet;\n}\n\n/**\n * [makeStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param selector  [description]\n * @return [description]\n */\nfunction makeStylesheet(selector: string): CSSStyleRule {\n\tconst root = getStylesheet();\n\n\tconst index = root.cssRules.length;\n\n\troot.insertRule(selector + \"{}\", index);\n\n\treturn root.cssRules[index] as CSSStyleRule;\n}\n\n/**\n * Defines a class for a CSS rule.\n *\n * Can be used to dynamically add CSS to the document.\n */\nexport class StyleRule extends Disposer {\n\n\t/**\n\t * CSS rule.\n\t */\n\tprivate _rule: CSSStyleRule;\n\n\t/**\n\t * A CSS selector text.\n\t *\n\t * E.g.: `.myClass p`\n\t *\n\t * @param selector  CSS selector\n\t */\n\tpublic set selector(selector: string) {\n\t\tthis._rule.selectorText = selector;\n\t}\n\n\t/**\n\t * @return CSS selector\n\t */\n\tpublic get selector(): string {\n\t\treturn this._rule.selectorText;\n\t}\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param selector  CSS selector\n\t * @param styles    An object of style attribute - value pairs\n\t */\n\tconstructor(selector: string, styles: { [name: string]: string }) {\n\t\t// TODO test this\n\t\tsuper(() => {\n\t\t\tconst root = getStylesheet();\n\n\t\t\t// TODO a bit hacky\n\t\t\tconst index = $array.indexOf(root.cssRules, this._rule);\n\n\t\t\tif (index === -1) {\n\t\t\t\tthrow new Error(\"Could not dispose StyleRule\");\n\n\t\t\t} else {\n\t\t\t\troot.deleteRule(index);\n\t\t\t}\n\t\t});\n\n\t\tthis._rule = makeStylesheet(selector);\n\n\t\t$object.each(styles, (key, value) => {\n\t\t\tthis.setStyle(key, value);\n\t\t});\n\t}\n\n\t/**\n\t * Sets the same style properties with browser-specific prefixes.\n\t *\n\t * @param name   Attribute name\n\t * @param value  Attribute value\n\t */\n\tprivate _setVendorPrefixName(name: string, value: string): void {\n\t\tconst style = this._rule.style;\n\t\tstyle.setProperty(\"-webkit-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-moz-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-ms-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-o-\" + name, value, \"\");\n\t\tstyle.setProperty(name, value, \"\");\n\t}\n\n\t/**\n\t * Sets a value for specific style attribute.\n\t *\n\t * @param name   Attribute\n\t * @param value  Value\n\t */\n\tpublic setStyle(name: string, value: string): void {\n\t\tif (name === \"transition\") {\n\t\t\tthis._setVendorPrefixName(name, value);\n\n\t\t} else {\n\t\t\tthis._rule.style.setProperty(name, value, \"\");\n\t\t}\n\t}\n\n}\n\n/**\n * An internal counter for unique style ids.\n *\n * @ignore Exclude from docs\n */\nlet styleId: number = 0;\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport class StyleClass extends StyleRule {\n\n\t/**\n\t * Class name.\n\t */\n\tprivate _className: string;\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param styles  An object of style attribute - value pairs\n\t * @param name    Class name\n\t */\n\tconstructor(styles: { [name: string]: string }, name?: string) {\n\t\tconst className =\n\t\t\t(!$type.hasValue(name)\n\t\t\t\t// TODO generate the classname randomly\n\t\t\t\t? \"__style_\" + (++styleId) + \"__\"\n\t\t\t\t: name);\n\n\t\tsuper(\".\" + className, styles);\n\n\t\tthis._className = className;\n\t}\n\n\t/**\n\t * Class name.\n\t *\n\t * @param name  Class name\n\t */\n\tpublic set className(name: string) {\n\t\tthis._className = name;\n\t\tthis.selector = \".\" + name;\n\t}\n\n\t/**\n\t * @return Class name\n\t */\n\tpublic get className(): string {\n\t\treturn this._className;\n\t}\n\n\t/**\n\t * Converts the whole class to\n\t * @ignore Exclude from docs\n\t */\n\tpublic toString(): string {\n\t\treturn this._className;\n\t}\n\n}\n\n\nexport function ready(f: () => void): void {\n\tif (document.readyState !== \"loading\") {\n\t\tf();\n\n\t} else {\n\t\tconst listener = () => {\n\t\t\tif (document.readyState !== \"loading\") {\n\t\t\t\tdocument.removeEventListener(\"readystatechange\", listener);\n\t\t\t\tf();\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener(\"readystatechange\", listener);\n\t}\n}\n\n/**\n * Returns a font fmaily name for the element (directly set or\n * computed/inherited).\n *\n * @ignore Exclude from docs\n * @param element  Element\n * @return Font family\n */\nexport function findFont(element: Element): string {\n\n\t// Check if element has styles set\n\tlet font = \"\";\n\tif ((<any>element).currentStyle) {\n\t\tfont = (<any>element).currentStyle[\"font-family\"];\n\t}\n\telse if (window.getComputedStyle) {\n\t\tfont = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-family\");\n\t}\n\n\tif (!font) {\n\t\t// Completely transparent. Look for a parent\n\t\tlet parent = element.parentElement || <Element>element.parentNode;\n\t\tif (parent) {\n\t\t\treturn findFont(parent);\n\t\t}\n\t\telse {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\telse {\n\t\treturn font;\n\t}\n\n}\n\n/**\n * Returns a font fmaily name for the element (directly set or\n * computed/inherited).\n *\n * @ignore Exclude from docs\n * @param element  Element\n * @return Font family\n */\nexport function findFontSize(element: Element): string {\n\n\t// Check if element has styles set\n\tlet font = \"\";\n\tif ((<any>element).currentStyle) {\n\t\tfont = (<any>element).currentStyle[\"font-size\"];\n\t}\n\telse if (window.getComputedStyle) {\n\t\tfont = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-size\");\n\t}\n\n\tif (!font) {\n\t\t// Completely transparent. Look for a parent\n\t\tlet parent = element.parentElement || <Element>element.parentNode;\n\t\tif (parent) {\n\t\t\treturn findFontSize(parent);\n\t\t}\n\t\telse {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\telse {\n\t\treturn font;\n\t}\n\n}"],"sourceRoot":""},"metadata":{},"sourceType":"module"}